# C2.B11 Проектная работа 11. Continuous Integration


## Задание

Оригинальная формулировка задания приведена [здесь](./TASK.md).

## Примечания к решению

- Использовался инструментарий CI -  [Concourse](https://concourse-ci.org/)

## Ход решения (принципиальная схема развертывания)

1. Устанавливаем CI: [1](https://concourse-ci.org/install.html), [2](https://github.com/concourse/concourse-docker)

2. Настраиваем [pipeline](./project.yml)

3. Несколько раз меняем [index.html](./index.html) репозитория, фиксируем результаты работы CI-инструементария

## Выводы по решению

- CI/CD - развернут
- По изменению скрипта запроса данных pipeline - отрабатывает, результаты - выводятся
- Выводы скриптов (после отладки, сработка - автоматически, по изменению репозитория; на скриншотах видно различие sha256-сумм index.html между билдами):
  - [первый (билд 2)](./out-screen--build2.png)
  - [второй (билд 3)](./out-screen--build3.png)
- Следующие условия задачи - выполняются:
    - Запускающий контейнер с nginx (версия на ваше усмотрение) с пробросом порта 80 в порт 9889 хостовой системы. При обращении к nginx в контейнере по HTTP, nginx должен выдавать измененный файл index.html.
    - Проверяющий код ответа запущенного контейнера при HTTP-запросе (код должен быть 200).
    - Сравнивающий sha256-сумму измененного файла с sha256-суммой файла, отдаваемого nginx при HTTP-запросе (суммы должны совпадать).
    - Триггер для старта CI: внесение изменений в созданный вами файл index.html из п.3. В случае выявления ошибки (во всех пунктах) или успеха (всего пайплайна), должно отправляться оповещение в Telegram. Текст оповещения — статический ("на ваше усмотрение").
    - После выполнения CI созданный контейнер удаляется.
- Более подробные скриншоты прохождения пайплайна на примере билда3:
    - [загрузка репозитория с кодом сайта](./out-screen--build3--step00.png);
    - [создание docker-образ сайта](./out-screen--build3--step01.png);
    - [расчет контрольной суммы для файла из репозитория](out-screen--build3--step02.png);
    - [запуск контейнера, скачивание индексного файла сайта контейнера, расчет для него контрольной суммы](./out-screen--build3--step03.png);
    - [..., в том числе в конце прокрутки предыдущего этапа (видны проверка кода возврата, сохранение index.html)](.out-screen--build3--step03-end.png);
    - [сверка контрольных сумм index.html из репозитория и отдаваемого сформированным docker-контейнером](.out-screen--build3--step04.png).
- Скриншот приватного канала Telegram с нотификацией событий - [здесь](./out-telegram-notifications.png)
